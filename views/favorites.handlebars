<h1 class="text-center">

    My Favorite Events</h1>
<div class="container">
    <div class="row mt-4">
        <div class="col-md">
            <div class="card-group">

                {{#each favoriteEvents}}
                <!-- Card Dark -->
                <div class="card">

                    <!-- Card image -->
                    <div class="view overlay">
                        <img class="card-img-top" src={{photo}} alt="Card image cap">
                        <a>
                            <div class="mask rgba-white-slight"></div>
                        </a>
                    </div>

                    <!-- Card content -->
                    <div class="card-body elegant-color white-text rounded-bottom">

                        <!-- Social shares button -->
                        <a class="activator waves-effect mr-4">
                            <i class="fa fa-share-alt white-text"></i>
                        </a>
                        <!-- Title -->
                        <h4 class="card-title">{{name}}</h4>
                        <hr class="hr-light">
                        <!-- Text -->
                        <p class="card-text white-text mb-4">{{description}}-{{date}} at {{time}}</p>
                        <!-- More info Link -->
                        <a href={{link}} target="_blank" class="white-text d-flex justify-content-end">
                            <h5>More Info
                                <i class="fa fa-angle-double-right"></i>
                            </h5>
                        </a>
                        <!-- Delete Link -->
                        <button data_id={{id}} class="white-text d-flex justify-content-end delete-btn">
                            <h5>Delete
                                <i class="fa fa-angle-double-right"></i>
                            </h5>
                        </button>

                    </div>

                </div>
                <!-- Card Dark -->
                {{/each}}

            </div>
        </div>

    </div>

</div>

{{!--
<ul>
    {{#each favoritesStuff}}
    <li>{{this}}</li>
    {{/each}}
</ul> --}}


<!-- Custom Script -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.0/moment.min.js" type="text/javascript"></script>
<script src="js/blog.js" type="text/javascript"></script>

<script>
    // Select delete-btn class using jquery and when clicked,
    // grab the data_id attr's value, store it in a var called eventsId and make a delete ajax request to /api/events/eventsId
    $(".delete-btn").on("click", function (event) {
        event.preventDefault(); // prevent the button from refreshing page

        var eventsId = $(this).attr("data_id");
        $.ajax({
            method: "DELETE",
            url: "/api/favorites/" + eventsId
        }).then(function () {
            // reload page (refresh)
            window.location.reload(true);
        })

    });

</script>